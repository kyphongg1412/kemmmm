<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>How Well Do You Know Me?</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0; min-height:100vh;
  display:flex; justify-content:center; align-items:center;
  background:linear-gradient(135deg,#ff9a9e,#fad0c4);
  font-family:Arial,sans-serif;
}
.box{
  background:#fff; padding:22px; border-radius:20px;
  width:380px; text-align:center;
  box-shadow:0 10px 30px rgba(0,0,0,.2);
}
h1{color:#ff4d6d}
input, select{
  width:100%; padding:10px;
  border-radius:10px; border:1px solid #ccc;
  margin-top:8px;
}
button{
  margin-top:12px;
  padding:10px 22px;
  border:none; border-radius:20px;
  background:#ff4d6d; color:#fff;
  font-size:16px; cursor:pointer;
}
.hidden{display:none}

.option{
  background:#ffe6eb;
  padding:12px;
  border-radius:14px;
  margin-top:10px;
  cursor:pointer;
}
.option.correct{background:#b7f7cc}
.option.wrong{background:#ffb3b3}
.option.disabled{pointer-events:none; opacity:.8}

.progress{
  height:8px; background:#eee;
  border-radius:10px; overflow:hidden;
  margin:10px 0;
}
.bar{height:100%; width:0%; background:#ff4d6d}

.tease{margin-top:8px; color:#ff4d6d; font-size:14px}
.rank{font-size:18px; margin-top:10px}
.linkBox{
  word-break:break-all;
  background:#f5f5f5;
  padding:10px;
  border-radius:10px;
  margin-top:10px;
  font-size:14px;
}
</style>
</head>

<body>
<div class="box">

<!-- CREATE -->
<div id="create">
  <h1>ğŸ¯ Táº¡o Quiz Vá» Báº¡n</h1>
  <input id="creatorName" placeholder="Nháº­p tÃªn cá»§a báº¡n">
  <hr>
  <input id="qText" placeholder="Nháº­p cÃ¢u há»i">
  <input id="a0" placeholder="ÄÃ¡p Ã¡n 1">
  <input id="a1" placeholder="ÄÃ¡p Ã¡n 2">
  <input id="a2" placeholder="ÄÃ¡p Ã¡n 3">
  <input id="a3" placeholder="ÄÃ¡p Ã¡n 4">
  <select id="correct">
    <option value="">-- Chá»n Ä‘Ã¡p Ã¡n Ä‘Ãºng --</option>
    <option value="0">ÄÃ¡p Ã¡n 1</option>
    <option value="1">ÄÃ¡p Ã¡n 2</option>
    <option value="2">ÄÃ¡p Ã¡n 3</option>
    <option value="3">ÄÃ¡p Ã¡n 4</option>
  </select>
  <button onclick="addQuestion()">â• ThÃªm cÃ¢u há»i</button>
  <button onclick="finishQuiz()">âœ… Káº¿t thÃºc & táº¡o link</button>
  <p id="count"></p>
</div>

<!-- SHARE -->
<div id="share" class="hidden">
  <h1>ğŸ”— Link cá»§a báº¡n</h1>
  <div id="shareLink" class="linkBox"></div>
  <p>Gá»­i link nÃ y cho ngÆ°á»i khÃ¡c lÃ m ğŸ˜</p>
</div>

<!-- GAME -->
<div id="game" class="hidden">
  <div class="progress"><div class="bar" id="bar"></div></div>
  <h1 id="question"></h1>
  <div id="options"></div>
  <div id="tease" class="tease"></div>
</div>

<!-- RESULT -->
<div id="result" class="hidden">
  <h1>Káº¿t quáº£ ğŸ’–</h1>
  <p id="scoreText"></p>
  <div id="rank" class="rank"></div>
</div>

</div>

<script>
let quiz = {name:"", questions:[]};
let idx=0, score=0;

const teases=[
  "ğŸ˜ Hiá»ƒu váº­y lÃ  chÆ°a Ä‘á»§ Ä‘Ã¢u nha",
  "ğŸ’€ Sai rá»“i kÃ¬a",
  "ğŸ¤¡ Tráº£ lá»i váº­y mÃ  cÅ©ng chá»n",
  "ğŸ˜ˆ HÆ¡i tháº¥t vá»ng nhaaa"
];

function addQuestion(){
  const q=qText.value;
  const a=[a0.value,a1.value,a2.value,a3.value];
  const c=correct.value;

  if(!q||a.some(x=>!x)||c===""){
    alert("Nháº­p Ä‘áº§y Ä‘á»§ cÃ¢u há»i & Ä‘Ã¡p Ã¡n");
    return;
  }

  quiz.questions.push({q,a,c:+c});
  qText.value=a0.value=a1.value=a2.value=a3.value="";
  correct.value="";
  count.textContent="Sá»‘ cÃ¢u: "+quiz.questions.length;
}

function finishQuiz(){
  if(!creatorName.value||quiz.questions.length===0){
    alert("Thiáº¿u tÃªn hoáº·c cÃ¢u há»i");
    return;
  }
  quiz.name=creatorName.value;
  const id=Date.now().toString(36);
  localStorage.setItem("quiz_"+id,JSON.stringify(quiz));
  shareLink.textContent=location.origin+location.pathname+"?quiz="+id;
  create.classList.add("hidden");
  share.classList.remove("hidden");
}

function loadQuiz(id){
  const data=localStorage.getItem("quiz_"+id);
  if(!data)return;
  quiz=JSON.parse(data);
  create.classList.add("hidden");
  game.classList.remove("hidden");
  loadQ();
}

function loadQ(){
  tease.textContent="";
  const q=quiz.questions[idx];
  question.textContent=q.q;
  options.innerHTML="";
  bar.style.width=Math.round(idx/quiz.questions.length*100)+"%";

  q.a.forEach((t,i)=>{
    const d=document.createElement("div");
    d.className="option";
    d.textContent=t;
    d.onclick=()=>choose(d,i===q.c);
    options.appendChild(d);
  });
}

function choose(el,ok){
  [...options.children].forEach(o=>o.classList.add("disabled"));
  if(ok){
    el.classList.add("correct");
    score++;
  }else{
    el.classList.add("wrong");
    tease.textContent=teases[Math.floor(Math.random()*teases.length)];
    [...options.children][quiz.questions[idx].c].classList.add("correct");
  }
  setTimeout(()=>{
    idx++;
    idx<quiz.questions.length?loadQ():showResult();
  },900);
}

function showResult(){
  game.classList.add("hidden");
  result.classList.remove("hidden");
  const percent=Math.round(score/quiz.questions.length*100);
  scoreText.innerHTML=`Báº¡n hiá»ƒu <b>${quiz.name}</b> Ä‘Æ°á»£c <b>${percent}%</b>`;
  if(percent>=85) rank.textContent="ğŸ’ª Máº NH THÃIIIII ğŸ”¥";
  else if(percent>=60) rank.textContent="ğŸ˜ Táº M CHáº¤P NHáº¬N";
  else rank.textContent="ğŸ’€ Yáº¾U THÃ!!! ğŸ˜ˆ";
}

const id=new URLSearchParams(location.search).get("quiz");
if(id) loadQuiz(id);
</script>
</body>
</html>
